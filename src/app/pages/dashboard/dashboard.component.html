<!-- We add a check to ensure the component only renders when data is ready -->
<main class="lp-main dashboard-page" *ngIf="summary">
  <h1 class="lp-title">
    <span>{{ 'dashboard.welcome' | translate }}</span>
    <span id="user-name">{{ summary.userName }}</span>!
  </h1>

  <!-- A more semantic and grid-friendly structure for the summary -->
  <div class="dashboard-summary">
    <div class="stat-card goal-card">
      <span class="stat-card__label">{{ 'dashboard.summary.goal' | translate }}</span>
      <span class="stat-card__value">â‚¹{{ summary.dailyGoal }}</span>
    </div>

    <div class="stat-card">
      <span class="stat-card__label">{{ 'dashboard.summary.level' | translate }}</span>
      <span class="stat-card__value">{{ summary.level }}</span>
    </div>

    <div class="stat-card">
      <span class="stat-card__label">{{ 'dashboard.summary.streak' | translate }}</span>
      <span class="stat-card__value">{{ summary.streak }} days</span>
    </div>

    <div class="stat-card badges-card">
      <span class="stat-card__label">{{ 'dashboard.summary.badges' | translate }}</span>
      <div class="stat-card__value badge-icons">
        <span *ngFor="let badge of summary.badges">{{ badge }}</span>
      </div>
    </div>

    <div class="stat-card xp-card">
      <span class="stat-card__label">{{ 'dashboard.summary.xp' | translate }}</span>
      <div class="xp-bar-container">
        <progress class="xp-bar" [value]="summary.xp" [max]="summary.xpMax"></progress>
        <span class="xp-text">{{ summary.xp }} / {{ summary.xpMax }}</span>
      </div>
    </div>
  </div>

  <nav class="dashboard-nav">
    <a [routerLink]="['/chat']" class="lp-btn">{{ 'dashboard.nav.chat' | translate }}</a>
    <a [routerLink]="['/stress']" class="lp-btn">{{ 'dashboard.nav.stress' | translate }}</a>
    <a [routerLink]="['/savings']" class="lp-btn">{{ 'dashboard.nav.savings' | translate }}</a>
    <a [routerLink]="['/learn']" class="lp-btn">{{ 'dashboard.nav.learn' | translate }}</a>
    <a [routerLink]="['/badges']" class="lp-btn">{{ 'dashboard.nav.badges' | translate }}</a>
    <a [routerLink]="['/profile']" class="lp-btn">{{ 'dashboard.nav.profile' | translate }}</a>
  </nav>

  <div class="dashboard-notifications">
    <span>{{ summary.aiNudge }}</span>
  </div>

  <div class="dashboard-widgets-container">
    <div id="dashboard-widgets">
      [Charts/Progress Placeholder]
    </div>
  </div>
</main>
